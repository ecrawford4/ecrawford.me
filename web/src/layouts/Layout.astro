---
import '../global.css';
const path = Astro.url.pathname;
const isActive = (href) => path.startsWith(href);
---
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<link rel="stylesheet" href="../global.css">
		<title>Ethan Crawford's Professional Website</title>
	</head>
	<body>
		<header class="site-header">
			<div class="header-left">
				<img class="logo" src="/assets/enc.svg" alt="Logo" />
				<h1 class="name-title">Ethan N. Crawford</h1>
			</div>

			<button class="mobile-menu-toggle" aria-expanded="false" aria-label="Menu">
				☰
			</button>

			<div class="theme-switcher">
				<label for="theme-select" class="sr-only">Theme</label>
				<select id="theme-select">
					<option value="dark">Dark</option>
					<option value="nord">Nord</option>
					<option value="light">Light</option>
					<option value="sepia">Sepia</option>
					<option value="frosty">Frosty</option>
					<!-- <option value="neon-void">Neon Void</option>
					<option value="synthwave">Synthwave</option>
					<option value="acid-matrix">Acid Matrix</option>
					<option value="inferno">Inferno</option>
					<option value="hologram">Hologram</option> -->
					<option value="high-contrast">High Contrast</option>
					<option value="high-contrast-dark">High Contrast Dark</option>
				</select>
			</div>
		</header>

		<div class="layout">
			<div class="mobile-nav">
				<nav class="nav-left">
					<h2>Navigation:</h2>
					<ul>
						<li class={isActive('/Home') ? 'active' : ''}>
							<a href="/Home">Home</a>
						</li>
						<li class={isActive('/Resume') ? 'active' : ''}>
							<a href="/Resume">Résumé</a>
						</li>
					</ul>
					<h3><i>External Links:</i></h3>
					<ul>
						<li><a target="_blank" href="/Sitemap">Sitemap</a></li>
					</ul>
					<h3><info>&ndash; my profiles:</info>
					</h3>
					<ul>
						<li><a target="_blank" href="https://www.linkedin.com/in/ecrawford4/">LinkedIn</a></li>
						<li><a target="_blank" href="https://github.com/ecrawford4/">GitHub</a></li>
						<li><a target="_blank" href="https://www.keybr.com/profile/r59aauz">Keybr</a></li>
						<!-- <li><a href=""></a></li> -->
					</ul>
					<h3><info>&ndash; my other websites:</info></h3>
					<ul>
						<li><a target="_blank" href="https://cscd488group3-bloombuddy.netlify.app/">Bloom Buddy</a></li>
						<li><a target="_blank" href="https://music-portfolio.ecrawford.me/">Music Portfolio</a></li>
						<li><a target="_blank" href="https://magicmirror.ecrawford.me/">Magic Mirror</a></li>
						<li><a target="_blank" href="https://blog.ecrawford.me/">Blog Template</a></li>
						<li><a target="_blank" href="https://legacy.ecrawford.me/">Legacy Website</a></li>
						<li><a target="_blank" href="https://landing.ecrawford.me/">Landing Page</a></li>
					</ul>
				</nav>
			</div>

			<main class="content">
				<slot />
			</main>
			
			<aside class="nav-right">
				<h3>About Me</h3>
				<p>In 2025, I earned a Bachelor of Science in Computer Science from Eastern Washington University.</p>
				
				<img src="/assets/head.jpg" alt="Portrait of Ethan Crawford" width="75%">
				
				<p>This website is my professional landing page as well as a place for me to publish my work. I am constantly updating this website with new features.</p>
				
				<h3><info>&ndash; my pinned projects:</info></h3>
				<ul>
					<li><a target="_blank" href="https://github.com/ecrawford4/seedgenerator">Seed Generator</a></li>
					<li><a target="_blank" href="https://github.com/ecrawford4/sitemap-generator/">Sitemap Generator</a></li>
					<li><a target="_blank" href="https://github.com/ecrawford4/tex-template-notes">Latex Template</a></li>
					<li><a target="_blank" href="https://github.com/ecrawford4/renew_ip">Renew IP</a></li>
				</ul>
			</aside>

			<!-- <main class="content">
				<slot />
			</main> -->
		</div>
		<footer>© 2026 Ethan Crawford</footer>

		<script>
		const content = document.querySelector('.content');
		let scrollbarTimeout;

		function showScrollbar() {
			content.classList.add('show-scrollbar');

			clearTimeout(scrollbarTimeout);
			scrollbarTimeout = setTimeout(() => {
			content.classList.remove('show-scrollbar');
			}, 2000);
		}

		content.addEventListener('scroll', showScrollbar);
		content.addEventListener('mouseenter', showScrollbar);
		</script>

		<script>
			const select = document.getElementById('theme-select');
			const savedTheme = localStorage.getItem('theme');

			if (savedTheme && savedTheme !== 'dark') {
				document.documentElement.dataset.theme = savedTheme;
				select.value = savedTheme;
			}

			select.addEventListener('change', () => {
				const theme = select.value;

				if (theme === 'dark') {
					document.documentElement.removeAttribute('data-theme');
					localStorage.removeItem('theme');
				} else {
					document.documentElement.dataset.theme = theme;
					localStorage.setItem('theme', theme);
				}
			});
		</script>

		<script>
			const menuBtn = document.querySelector('.mobile-menu-toggle');
			const mobileNav = document.querySelector('.mobile-nav');

			menuBtn.addEventListener('click', () => {
				const open = mobileNav.classList.toggle('open');
				menuBtn.setAttribute('aria-expanded', open);
			});
		</script>

		<script>
			const sections = document.querySelectorAll('.card .section');

			function isMobile() {
				return window.matchMedia('(max-width: 56rem)').matches;
			}

			function closeSection(section) {
				const content = section.querySelector('.section-content');
				content.style.maxHeight = '0';
				section.classList.remove('open');
			}

			function openSection(section) {
				const content = section.querySelector('.section-content');
				content.style.maxHeight = content.scrollHeight + 'px';
				section.classList.add('open');
			}

			sections.forEach(section => {
				const header = section.querySelector('h2, h3, h4');
				const content = section.querySelector('.section-content');
				if (!header || !content) return;

				// initial collapsed state
				content.style.maxHeight = '0';

				header.addEventListener('click', () => {
				if (!isMobile()) return;

				const isOpen = section.classList.contains('open');

				// close all
				sections.forEach(s => {
					if (s !== section) closeSection(s);
				});

				// toggle current
				if (isOpen) {
					closeSection(section);
				} else {
					openSection(section);
				}
				});
			});

			// Recalculate heights on resize (rotation, viewport changes)
			window.addEventListener('resize', () => {
				if (!isMobile()) {
				sections.forEach(s => {
					const content = s.querySelector('.section-content');
					content.style.maxHeight = '';
					s.classList.remove('open');
				});
				}
			});
		</script>
	</body>
</html>
